(this.webpackJsonpreact_prject=this.webpackJsonpreact_prject||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(9),s=n.n(a),r=n(19),i=n.n(r),o=n(8),l=n.n(o),d=n(11),h=n(13),m=n(12),c=n(1),u=n(2),_=n(6),k=n(3),g=n(4),v=(n(28),n(17)),f=n(20),w=n(18),p=n(0),y=n(22),L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;Object(c.a)(this,e),this.vector=new p.qb,this._x=0,this._y=0,this._selector=t,this._time=0,this._delta=0,this._fps=60,this._init()}return Object(u.a)(e,[{key:"_init",value:function(){var e=this;this._time=(new Date).getTime(),this._selector.onmousemove=function(t){e._requestAnimationFrame((function(){e._update(t.clientX,t.clientY)}))}}},{key:"_requestAnimationFrame",value:function(e){this._delta=(new Date).getTime()-this._time,this._delta>1e3/this._fps&&e()}},{key:"_update",value:function(e,t){this._x=e,this._y=t,this.vector.x=e/window.innerWidth*2-1,this.vector.y=-t/window.innerHeight*2+1,this._delta=0,this._time=(new Date).getTime()}}]),e}(),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;Object(c.a)(this,e),this._time=(new Date).getTime(),this._delta=0,this._fps=t}return Object(u.a)(e,[{key:"try",value:function(e){this._delta=(new Date).getTime()-this._time,this._delta>1e3/this._fps&&("function"===typeof e?e():console.log(e),this._delta=0,this._time=(new Date).getTime())}}]),e}();function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,a=new p.i(e,t),s=new p.M({color:n});return new p.L(a,s)}var j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;Object(c.a)(this,e),this._landmarks=[],this._tempLandmarks=t||[],this.model=new p.r,this.color=n,this._bodyParts=[],this._skeletonGenerated=!1,this._init()}return Object(u.a)(e,[{key:"_init",value:function(){this._axis=new p.c(1),this.model.add(this._axis),this._convertToLocalSpace(),this._generateSkeleten()}},{key:"_convertToLocalSpace",value:function(){var e=this;if(!this._tempLandmarks)return null;this._landmarks.splice(0,this._landmarks.length),this._tempLandmarks.forEach((function(t,n){var a=new p.rb(t.x,t.y,t.z);a.x=a.x-e._tempLandmarks[0].x,a.y=-(a.y-e._tempLandmarks[0].y),a.z=-(a.z-e._tempLandmarks[0].z),e._landmarks.push(a)}))}},{key:"_generateSkeleten",value:function(){this._landmarks.length&&(this.model.add(this._generateHead()),this.model.add(this._generateSquareBody()),this.model.add(this._generateLeftArm()),this.model.add(this._generateRightArm()),this.model.add(this._generateLeftLeg()),this.model.add(this._generateRightLeg()),this.model.add(this._generateRightFoot()),this.model.add(this._generateLeftFoot()),this.model.add(this._generateRightHand()),this.model.add(this._generateLeftHand()),this._worldToLoacal(),this._skeletonGenerated=!0)}},{key:"_worldToLoacal",value:function(){return null}},{key:"_generateLeftArm",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[11],this._landmarks[13],this._landmarks[15]]),n=new p.y(t,e);return n.name="LeftArm",n}},{key:"_generateRightArm",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[12],this._landmarks[14],this._landmarks[16]]),n=new p.y(t,e);return n.name="RightArm",n}},{key:"_generateSquareBody",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[12],this._landmarks[11],this._landmarks[23],this._landmarks[24],this._landmarks[12]]),n=new p.y(t,e);return n.name="SquareBody",n}},{key:"_generateLeftLeg",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[23],this._landmarks[25],this._landmarks[27]]),n=new p.y(t,e);return n.name="LeftLeg",n}},{key:"_generateRightLeg",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[24],this._landmarks[26],this._landmarks[28]]),n=new p.y(t,e);return n.name="RightLeg",n}},{key:"_generateHead",value:function(){var e=new b(.1,20,this.color);return e.position.copy(this._landmarks[0]),e.name="Head",e}},{key:"_generateRightFoot",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[28],this._landmarks[30],this._landmarks[32],this._landmarks[28]]),n=new p.y(t,e);return n.name="RightFoot",n}},{key:"_generateLeftFoot",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[27],this._landmarks[31],this._landmarks[29],this._landmarks[27]]),n=new p.y(t,e);return n.name="LeftFoot",n}},{key:"_generateRightHand",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[16],this._landmarks[22],this._landmarks[20],this._landmarks[18],this._landmarks[16]]),n=new p.y(t,e);return n.name="RightHand",n}},{key:"_generateLeftHand",value:function(){var e=new p.z({color:this.color}),t=(new p.g).setFromPoints([this._landmarks[15],this._landmarks[21],this._landmarks[19],this._landmarks[17],this._landmarks[15]]),n=new p.y(t,e);return n.name="LeftHand",n}},{key:"getModel",value:function(){return this.model}},{key:"update",value:function(e){var t=this;this._skeletonGenerated||this._generateSkeleten(),this._tempLandmarks=e,this._convertToLocalSpace(),this.model.children.forEach((function(e){"Head"===e.name?e.position.copy(t._landmarks[0]):"LeftArm"===e.name?e.geometry.setFromPoints([t._landmarks[11],t._landmarks[13],t._landmarks[15]]):"RightArm"===e.name?e.geometry.setFromPoints([t._landmarks[12],t._landmarks[14],t._landmarks[16]]):"SquareBody"===e.name?e.geometry.setFromPoints([t._landmarks[12],t._landmarks[11],t._landmarks[23],t._landmarks[24],t._landmarks[12]]):"LeftLeg"===e.name?e.geometry.setFromPoints([t._landmarks[23],t._landmarks[25],t._landmarks[27]]):"RightLeg"===e.name?e.geometry.setFromPoints([t._landmarks[24],t._landmarks[26],t._landmarks[28]]):"RightFoot"===e.name?e.geometry.setFromPoints([t._landmarks[28],t._landmarks[30],t._landmarks[32],t._landmarks[28]]):"LeftFoot"===e.name?e.geometry.setFromPoints([t._landmarks[27],t._landmarks[31],t._landmarks[29],t._landmarks[27]]):"RightHand"===e.name?e.geometry.setFromPoints([t._landmarks[16],t._landmarks[22],t._landmarks[20],t._landmarks[18],t._landmarks[16]]):"LeftHand"===e.name&&e.geometry.setFromPoints([t._landmarks[15],t._landmarks[21],t._landmarks[19],t._landmarks[17],t._landmarks[15]])})),this._worldToLoacal()}}]),e}(),O=n(21),x=n(7),R=640,P=480,S=(new L,new F(1),[]);var z=function(e){Object(k.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).scene=null,a.camera=null,a.renderer=null,a.model=null,a.mouse=null,a.canvas=null,a.controls=null,a.circles=new Array(33).fill(0).map((function(){return new b})),a.skeleton=null,a.animate=a.animate.bind(Object(_.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.scene=new p.fb,this.camera=new p.W(75,R/P,.1,1e3),this.renderer=new p.tb,this.renderer.setSize(R,P),this.scene.background=new p.k(13421772),this.mount.appendChild(this.renderer.domElement),this.canvas=this.mount.children[0],this.controls=new O.a(this.camera,this.renderer.domElement),(new y.a).load("assets/3d/fire_fighter/scene.gltf",(function(t){e.model=t,console.log(t);var n,a=Object(m.a)(t.parser.associations);try{for(a.s();!(n=a.n()).done;){var s=Object(h.a)(n.value,2),r=s[0];s[1];console.log(r)}}catch(i){a.e(i)}finally{a.f()}e.animate()}),void 0,(function(e){console.error(e)})),console.log("Creating a Skeleton"),this.skeleton=new j(S.poseLandmarks),this.skeleton.model.translateX(.5),this.skeleton.model.translateZ(.5),this.scene.add(this.skeleton.model);var t=new p.a(15658734);this.scene.add(t);var n=new p.c(5);this.scene.add(n);var a=new p.q(100,10);this.scene.add(a),this.camera.position.x=.3,this.camera.position.y=.3,this.camera.position.z=5}},{key:"animate",value:function(){S.poseLandmarks&&(this.skeleton.update(S.poseLandmarks),this.skeleton.model.position.copy(S.poseLandmarks[0])),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)}},{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{ref:function(t){return e.mount=t}})}}]),n}(s.a.Component),T=function(e){Object(k.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).video=null,a.canvas=null,a.ctx=null,a.pose=null,a.camera=null,a.onResults=a.onResults.bind(Object(_.a)(a)),a.renderLandmarks=a.renderLandmarks.bind(Object(_.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.video=document.querySelector("#video_input"),this.canvas=document.querySelector("#output_canvas"),this.ctx=this.canvas.getContext("2d"),this.pose=new v.Pose({locateFile:function(e){return"assets/js/".concat(e)}}),this.pose.setOptions({upperBodyOnly:!1,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),this.pose.onResults(this.onResults),this.camera=new f.Camera(this.video,{onFrame:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pose.send({image:t.video});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),width:R,height:P}),this.camera.start();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onResults",value:function(e){S=e,this.renderLandmarks(e)}},{key:"renderLandmarks",value:function(e){this.ctx.save(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(e.image,0,0,this.canvas.width,this.canvas.height),Object(w.drawConnectors)(this.ctx,e.poseLandmarks,v.POSE_CONNECTIONS,{color:"#FFFFFF",lineWidth:1}),Object(w.drawLandmarks)(this.ctx,e.poseLandmarks,{color:"#FFFF00",lineWidth:1}),this.ctx.restore()}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(z,{}),Object(x.jsx)("canvas",{id:"output_canvas",width:R,height:P}),Object(x.jsx)("video",{id:"video_input",width:R,height:P})]})}}]),n}(s.a.Component);i.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(T,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.b64944f2.chunk.js.map